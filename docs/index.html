<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Fund Tracker Dashboard</title>

  <!-- DataTables CSS (leave this, it only provides table basics) -->
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"
  >
  <!-- Flatpickr CSS (leave this too, it only styles the datepicker) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
  >

  <!-- ─────────────────────────── Inlined Custom CSS ─────────────────────────── -->
  <style>
    /* ─── GLOBAL RESET & BODY ───────────────────────────────────────────────── */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      background-color: #0f0f13;      /* Dark navy/black background */
      color: #ececec;                  /* Light text */
      font-family:
        -apple-system,
        BlinkMacSystemFont,
        "Segoe UI",
        Roboto,
        Helvetica,
        Arial,
        sans-serif,
        "Apple Color Emoji",
        "Segoe UI Emoji";
      line-height: 1.4;
    }

    /* ─── DASHBOARD CARD CONTAINER ───────────────────────────────────────────── */
    .ft-dashboard-card {
      max-width: 1200px;
      margin: 2rem auto;               /* Center in the viewport with top/bottom margin */
      padding: 1.5rem 2rem 2rem 2rem;   /* Inner padding */
      background-color: rgba(15, 15, 19, 0.85); /* Slightly translucent dark card */
      border-radius: 8px;
      position: relative;
    }

    /* ─── HEADER (TITLE + DOWNLOAD LINK) ──────────────────────────────────────── */
    .ft-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    .ft-title {
      font-size: 2.5rem;
      font-weight: 600;
      margin: 0;
      /* Purple→Blue gradient text: purple covers ~45%, then blue to 100% */
      background: linear-gradient(
        to right,
        #A020F0 0%,
        #A020F0 45%,
        #4AB3F4 100%
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
    }
    .ft-download a {
      color: #4AB3F4;   /* Light blue link */
      text-decoration: none;
      font-size: 1rem;
      font-weight: 500;
    }
    .ft-download a:hover {
      text-decoration: underline;
    }

    /* ─── FILTER TABS ──────────────────────────────────────────────────────────── */
    .ft-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }
    .ft-btn {
      padding: 0.5rem 1rem;
      background: transparent;
      border: 2px solid rgba(236, 236, 236, 0.2);
      border-radius: 6px;
      color: #ececec;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: color 0.2s ease, border-color 0.2s ease;
      position: relative;
      overflow: hidden;
    }
    .ft-btn:hover,
    .ft-btn:focus {
      color: #4AB3F4;
      border-color: #4AB3F4;
      outline: none;
    }
    .ft-btn.active {
      color: transparent;      /* Text will come from gradient */
      border: none;            /* Remove the gray border */
      border-width: 2px;
      /* Gradient border: heavy purple (0–45%), then fade to blue (45–100%) */
      border-image: linear-gradient(
        to right,
        #A020F0 0%,
        #A020F0 45%,
        #4AB3F4 100%
      ) 1;
      /* Gradient text inside */
      background: linear-gradient(
        to right,
        #A020F0 0%,
        #A020F0 45%,
        #4AB3F4 100%
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
    }
    .ft-btn.active:hover {
      filter: brightness(1.1);
    }

    /* ─── BACKFILL CONTROLS ───────────────────────────────────────────────────── */
    .ft-backfill-section {
      margin-bottom: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: flex-start; /* Ensures left alignment under “All” tab */
    }
    .ft-backfill-controls {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }
    .ft-date-input {
      background-color: rgba(236, 236, 236, 0.1);
      border: 1px solid rgba(236, 236, 236, 0.2);
      border-radius: 6px;
      padding: 0.5rem 1rem;
      color: #ececec;
      font-size: 1rem;
      min-width: 240px;
      cursor: pointer;
      transition: border-color 0.2s ease;
    }
    .ft-date-input:hover,
    .ft-date-input:focus {
      border-color: #4AB3F4;
      outline: none;
    }
    .ft-backfill-btn {
      padding: 0.6rem 1.25rem;
      font-size: 1rem;
      font-weight: 500;
      color: #fff;
      border: none;
      border-radius: 6px;
      /* Solid fill gradient: purple 0–60%, blue 60–100% */
      background: linear-gradient(
        to right,
        #A020F0 0%,
        #A020F0 60%,
        #4AB3F4 100%
      );
      cursor: pointer;
      transition: filter 0.2s ease;
    }
    .ft-backfill-btn:hover {
      filter: brightness(1.1);
    }
    .ft-backfill-note {
      color: rgba(236, 236, 236, 0.6);
      font-size: 0.875rem;
      margin: 0;
    }

    /* ─── TABLE STYLING ─────────────────────────────────────────────────────────── */
    .table-container {
      border: 1px solid rgba(236, 236, 236, 0.1);
      border-radius: 6px;
      overflow: hidden;
    }
    /* Header cells: purple→blue gradient text */
    #companies thead th {
      padding: 0.75rem;
      background-color: rgba(15, 15, 19, 0.9);
      background: linear-gradient(to right, #A020F0 0%, #4AB3F4 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      font-weight: 500;
      font-size: 1rem;
      border-bottom: 1px solid rgba(236, 236, 236, 0.1);
    }
    /* Body cells: dark background, subtle borders */
    #companies tbody td {
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid rgba(236, 236, 236, 0.05);
      background-color: rgba(15, 15, 19, 0.8);
      color: #ccc;
    }
    /* Hover effect: lighten row */
    #companies tbody tr:hover td {
      background-color: rgba(236, 236, 236, 0.05);
    }
    /* Remove border bottom on last row */
    #companies tbody tr:last-child td {
      border-bottom: none;
    }

    /* ─── DATATABLES OVERRIDES ─────────────────────────────────────────────────── */
    .dataTables_wrapper .dataTables_filter input {
      background-color: rgba(236, 236, 236, 0.1);
      border: 1px solid rgba(236, 236, 236, 0.2);
      color: #fff;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      color: #ececec !important;
      border: 1px solid transparent;
      border-radius: 4px;
      padding: 0.3rem 0.6rem;
      margin: 0 0.2rem;
      transition: background-color 0.2s ease, color 0.2s ease;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background: linear-gradient(to right, #A020F0 0%, #4AB3F4 100%) !important;
      color: #fff !important;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button:hover {
      background-color: rgba(74, 179, 244, 0.2) !important;
      color: #4AB3F4 !important;
    }
  </style>
  <!-- ────────────────────────────────────────────────────────────────────────────── -->
</head>
<body>

  <div class="ft-dashboard-card">
    <!-- HEADER: TITLE + DOWNLOAD LINK -->
    <div class="ft-header">
      <h1 class="ft-title">Fund Tracker Dashboard</h1>
      <p class="ft-download">
        <a href="/assets/data/relevant_companies.xlsx" download>Download filtered Excel</a>
      </p>
    </div>

    <!-- FILTER TABS -->
    <nav class="ft-filters">
      <button class="ft-btn active" data-filter="">All</button>
      <button class="ft-btn" data-filter="Ventures">Ventures</button>
      <button class="ft-btn" data-filter="Capital">Capital</button>
      <button class="ft-btn" data-filter="Equity">Equity</button>
      <button class="ft-btn" data-filter="Advisors">Advisors</button>
      <button class="ft-btn" data-filter="Partners">Partners</button>
      <button class="ft-btn" data-filter="SIC">SIC Codes</button>
      <button class="ft-btn" data-filter="Fund Entities">Fund Entities</button>
    </nav>

    <!-- BACKFILL CONTROLS (LEFT‐ALIGNED UNDER “All” TAB) -->
    <div class="ft-backfill-section">
      <div class="ft-backfill-controls">
        <input
          id="backfill-range"
          class="ft-date-input"
          placeholder="Click to select date range"
          readonly
        />
        <button id="run-backfill" class="ft-backfill-btn">Run Historical Backfill</button>
      </div>
      <small class="ft-backfill-note">
        Backfill historical data without leaving this page.
      </small>
    </div>

    <!-- MAIN DATA TABLE -->
    <div class="table-container" id="companies-container">
      <table id="companies" class="display" style="width:100%">
        <thead>
          <tr>
            <th>Company Name</th>
            <th>Company Number</th>
            <th>Incorporation Date</th>
            <th>Category</th>
            <th>Date Downloaded</th>
            <th>Directors</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

    <!-- SIC‐MATCH TABLE (HIDDEN BY DEFAULT) -->
    <div class="table-container" id="sic-companies-container" style="display:none;">
      <table id="sic-companies" class="display" style="width:100%">
        <thead>
          <tr>
            <th>Company Name</th>
            <th>Company Number</th>
            <th>Incorporation Date</th>
            <th>Category</th>
            <th>Date Downloaded</th>
            <th>SIC Codes</th>
            <th>SIC Description</th>
            <th>Typical Use Case</th>
            <th>Directors</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>

  </div>

  <!-- ─── SCRIPTS (UNCHANGED) ────────────────────────────────────────────────────── -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="assets/js/dashboard.js"></script>
  <!-- ────────────────────────────────────────────────────────────────────────────── -->
</body>
</html>
